root: "node_schema"
schemas:
  node_schema:
    type: "dict"
    props:
      credential:
        schema: "credential"
      params:
        schema: "params"
  credential:
    type: "dict"
    props:
      host_user:
        type: "str"
        non_empty: true
      host_group:
        type: "str"
      host_pass:
        type: "str"
      ssh_file:
        type: "str"
      ssh_file_encrypted:
        type: "bool"
      host_ssh_public_keys_path:
        type: "str"
      user_data:
        type: "dict"
  params:
    type: "dict"
    props:
      dns_service_params_list:
        type: "list"
        elem_schema: "dns"
      host_test:
        schema: "host_test"
      cron:
        type: "list"
        elem_schema: "cron"
      cron_start:
        type: "bool"
      cron_start_root:
        type: "bool"
  host_test:
    type: "dict"
    props:
      log_file:
        type: "str"
        non_empty: true
      setup_finished_log_regex:
        type: "str"
        non_empty: true
      setup_success_log_last_line:
        type: "str"
        non_empty: true
      initial_connection_timeout:
        type: "int"
      setup_finished_timeout:
        type: "int"
  cron:
    type: "dict"
    props:
      user:
        type: "str"
        non_empty: true
      src_file:
        type: "str"
        non_empty: true
      dest_dir:
        type: "str"
        non_empty: true
  dns:
    type: "dict"
    props:
      record:
        type: "str"
        non_empty: true
      ttl:
        type: "int"
